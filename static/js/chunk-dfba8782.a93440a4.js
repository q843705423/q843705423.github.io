(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dfba8782"],{"163d":function(t,a,e){"use strict";var i=e("e7ad"),r=e("e042"),n=e("75c4"),s=e("1e5b"),o=e("94b3"),c=e("238a"),l=e("2ea2").f,d=e("dcb7").f,h=e("064e").f,f=e("777a").trim,p="Number",u=i[p],v=u,g=u.prototype,m=n(e("e005")(g))==p,b="trim"in String.prototype,x=function(t){var a=o(t,!1);if("string"==typeof a&&a.length>2){a=b?a.trim():f(a,3);var e,i,r,n=a.charCodeAt(0);if(43===n||45===n){if(e=a.charCodeAt(2),88===e||120===e)return NaN}else if(48===n){switch(a.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+a}for(var s,c=a.slice(2),l=0,d=c.length;l<d;l++)if(s=c.charCodeAt(l),s<48||s>r)return NaN;return parseInt(c,i)}}return+a};if(!u(" 0o1")||!u("0b1")||u("+0x1")){u=function(t){var a=arguments.length<1?0:t,e=this;return e instanceof u&&(m?c((function(){g.valueOf.call(e)})):n(e)!=p)?s(new v(x(a)),e,u):x(a)};for(var y,C=e("149f")?l(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;C.length>w;w++)r(v,y=C[w])&&!r(u,y)&&h(u,y,d(v,y));u.prototype=g,g.constructor=u,e("bf16")(i,p,u)}},"38eb":function(t,a,e){},"530f":function(t,a,e){"use strict";e.d(a,"a",(function(){return h}));e("6f84"),e("163d"),e("9a33");var i=[],r=[],n={},s=!0,o=[];function c(t){for(var a=[],e=0;e<t.length;e++){var i=t[e].col1.split("_");a.push({x:Number(i[0]),y:Number(i[1]),num:t[e].col2,id:e+1,if_draw:t[e].if_draw})}return a}function l(t){t}function d(){o=" "}function h(t){this.grad=p(t.color),this.data=c(t.data),this.max=this.data[0]?this.data[0].num:0,this.zIndex=0}h.prototype=new BMap.Overlay,h.prototype.initialize=function(t){this.map=t;var a=this.canvas=document.createElement("canvas");a.style.cssText="position:absolute;left:0;top:0;z-index:"+this.zIndex+";",this.adjustSize(),t.getPanes().mapPane.appendChild(a);var e=this;return t.addEventListener("resize",(function(){e.adjustSize(),e.draw()})),this.canvas};var f=function(t,a){for(var e=0,i=a.x,r=a.y,n=0;n<t.length;n++){var s=t[n].r/2,o=t[n].x,c=t[n].y,l=o-i,d=c-r;if(l*l+d*d<s*s){e=t[n].codex+"_"+t[n].codey;break}}return e};function p(t){var a=document.createElement("canvas"),e=a.getContext("2d"),i=e.createLinearGradient(0,0,0,256);for(var r in a.width=1,a.height=256,t)i.addColorStop(r,t[r]);return e.fillStyle=i,e.fillRect(0,0,1,256),e.getImageData(0,0,1,256).data}h.prototype.updata=function(t,a,e){0==t.length?(this.data=[],this.max=0):(e?this.data=t:(o="",this.data=c(t)),l(this.data),this.max=this.data[0].num),r=[],this.draw(),a&&this.getblock()},h.prototype.adjustSize=function(){var t=this.map.getSize(),a=this.canvas;a.width=t.width,a.height=t.height},h.prototype.draw=function(){if(!s)return!1;var t=this.map,a=t.getSize(),e=t.getCenter();if(e){var i=t.pointToOverlayPixel(e);this.canvas.style.left=i.x-a.width/2+"px",this.canvas.style.top=i.y-a.height/2+"px",this.dispatchEvent("draw"),this.hb()}},h.prototype.clear=function(){var t=this.canvas.getContext("2d");t.clearRect(0,0,t.canvas.width,t.canvas.height)},h.prototype.hb=function(){var t=this.map,a=this.canvas.getContext("2d");a.clearRect(0,0,a.canvas.width,a.canvas.height);var e=t.getZoom(),n=Math.pow(2,18-e),s=400/n,c=s-1,l=this.grad,d=t.getMapType().getProjection(),h=d.lngLatToPoint(t.getCenter()),f=new BMap.Pixel(h.x-t.getSize().width/2*n,h.y+t.getSize().height/2*n),p=this.data,u=p.length,v=this.max;a.textBaseline="middle",a.textAlign="center";v=0;var g=1e10,m=0;for(var b in p)p[b].num>v&&(v=p[b].num),p[b].num<g&&(g=p[b].num),m=v-g;var x=g+.7*m,y=g+.6*m,C=g+.5*m,w=g+.4*m;b=0;i=[];for(b=0;b<u;b++){a.beginPath();var _,I=(p[b].x-f.x)/n,S=(f.y-p[b].y)/n,T=p[b].num,E=p[b].x+"_"+p[b].y;0!=m&&(T==v?_=1:T>=x?_=.99:T>=y?_=.95:T>=C?_=.8:T>=w?_=.7:T<w&&(_=.5));for(var M=0;M<r.length;M++)if(E==r[M]){_=.1;break}_>1&&(_=2),_*=255,_=parseInt(_,10),_*=4;var N="rgba("+l[_]+", "+l[_+1]+", "+l[_+2]+",0.6)";a.fillStyle=E==o?"#FAFAFA":N,!0!==p[b].if_draw&&(a.fillStyle="rgba(0,0,0,0)"),a.moveTo(I,S-c/2),a.lineTo(I+c/2,S-c/4),a.lineTo(I+c/2,S+c/4),a.lineTo(I,S+c/2),a.lineTo(I-c/2,S+c/4),a.lineTo(I-c/2,S-c/4),a.lineTo(I,S-c/2),a.fill();for(M=0;M<r.length;M++)E==r[M]&&(a.lineWidth=4,a.strokeStyle="blue",a.stroke());E==o&&(a.lineWidth=4,a.strokeStyle="red",a.stroke());var P=[];P.push({x:I,y:S,r:c,codex:p[b].x,codey:p[b].y}),i.push(P[P.length-1]),e>14&&(a.fillStyle="#333",a.fillText(b+1,I,S)),a.closePath()}},h.prototype.getblock=function(){var t=this.map,a=(this.data,this);n={},t.addEventListener("click",(function(t){var e=t.jb.x,s=t.jb.y,o={x:e,y:s};for(var c in code=f(i,o),1!=t.ctrlKey&&1!=n[code]&&(n={}),0!=code&&1!=t.ctrlKey?n[code]?n={}:n[code]=1:0==code||1!=t.ctrlKey?n={}:t.ctrlKey&&(1==n[code]?delete n[code]:n[code]=1),r=[],n)r.push(c);d(),a.draw(),floating.select_block(r)}))}},"5b3e":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 col-sm-12 col-xs-12 noPadding"},[e("el-card",[e("div",{staticClass:"row"},[e("div",{staticClass:"row conditionDiv"},[e("div",{staticClass:"conditionTitle"},[e("span",[t._v("来源地:")])]),t._v(" "),e("div",{staticClass:"top_search col-md-2 col-sm-2 col-xs-4",staticStyle:{"margin-left":"10px"}},[e("div",{staticClass:"input-group"},[e("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"核心商圈"}})])]),t._v(" "),e("div",{staticClass:"conditionTitle"},[e("span",[t._v("时间:")])]),t._v(" "),e("div",{staticClass:"conditionContent"},[e("div",{staticClass:"pull-right",staticStyle:{background:"#fff",cursor:"pointer",padding:"5px 10px",border:"1px solid #ccc"},attrs:{id:"reportrange"}},[e("i",{staticClass:"glyphicon glyphicon-calendar fa fa-calendar"}),t._v(" "),e("span",[t._v("December 30, 2014 - January 28, 2015")]),t._v(" "),e("b",{staticClass:"caret"})])])])])])],1)]),t._v(" "),e("div",{staticClass:"row imageRow"},[e("div",{staticClass:"col-md-12 col-sm-12 col-xs-12"},[e("el-card",[e("div",{staticClass:"col-md-6 col-sm-4 col-xs-8"},[e("div",{staticClass:"x_panel"},[e("div",{staticClass:"x_content"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 col-sm-12 col-xs-24"},[e("div",{ref:"echartsImage",staticClass:"echartsImage",attrs:{id:"echartsImage"}})])])])])]),t._v(" "),e("div",{staticClass:"col-md-6 col-sm-4 col-xs-8"},[e("div",{staticClass:"x_panel"},[e("div",{staticClass:"x_content"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 col-sm-12 col-xs-24"},[e("div",{ref:"comeImage",staticClass:"echartsImage",attrs:{id:"comeImage"}})])])])])])])],1)]),t._v(" "),e("div",{staticClass:"row imageRow"},[e("div",{staticClass:"col-md-12 col-sm-12 col-xs-12 noPadding"},[e("el-card",[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"bm-view",attrs:{id:"firePowerMap"}})])])],1)])])},r=[],n=(e("9a33"),e("70ea")),s=e("530f"),o=(e("354f"),e("7f22")),c=e.n(o),l=(e("89e3"),{data:function(){var t;return{sexChart:null,comeChart:null,chart:null,familyChart:null,originChart:null,childrenChart:null,occupationChart:null,incomeChart:null,carChart:null,moveChart:null,mapFlag:!1,option:{color:["#3498DB","rgb(38,185,154)","rgb(231,76,60)","rgb(115,89,182)","rgb(189,195,199)"],title:{text:"忠诚度占比",left:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}% ({d}%)"},legend:{left:"center",top:"bottom",data:["忠诚客流","高频客流","中频客流","低频客流","流失客群"]},series:[{name:"访问来源",type:"pie",radius:"50%",data:[{value:25,name:"忠诚客流"},{value:5,name:"高频客流"},{value:10,name:"中频客流"},{value:50,name:"低频客流"},{value:10,name:"流失客群"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},comeOption:(t={color:["#3498DB","rgb(38,185,154)","rgb(231,76,60)","rgb(115,89,182)","rgb(189,195,199)"],title:{text:"到店频次",left:"left"}},Object(n["a"])(t,"color",["#3398DB"]),Object(n["a"])(t,"tooltip",{trigger:"axis",axisPointer:{type:"shadow"}}),Object(n["a"])(t,"label",{show:!0,position:"top",formatter:"{c}%"}),Object(n["a"])(t,"grid",{left:"3%",right:"4%",bottom:"3%",containLabel:!0}),Object(n["a"])(t,"xAxis",[{type:"category",data:["1次","2次","3次","4次","5次","5次以上"],axisTick:{alignWithLabel:!0}}]),Object(n["a"])(t,"yAxis",[{type:"value",axisLabel:{show:!0,interval:"auto",formatter:"{value} %"},show:!0}]),Object(n["a"])(t,"series",[{type:"bar",barWidth:"40%",data:[49.18,24.01,11.78,5.48,2.7,6.85]}]),t)}},methods:{initEcharts:function(){var t=this.$refs.echartsImage;this.chart=c.a.init(t),this.chart.setOption(this.option),this.comeChart=c.a.init(this.$refs.comeImage),this.comeChart.setOption(this.comeOption)},_getMapData:function(){var t=new BMap.Map("firePowerMap"),a=new BMap.Point(116.404,39.915);t.centerAndZoom(a,15),t.setCurrentCity("北京"),t.enableScrollWheelZoom(!0),window.map=t},drawHeatMap:function(){var t=new s["a"]({data:[],color:{.5:"#fdc387",.7:"#f1c232",.8:"#ffff00",.95:"#ff5454",.99:"#980000",1:"#ff0000"}});map.addOverlay(t);for(var a=[],e=["13382000_3508700","13381800_3508400","13382000_3508100","13382200_3508400","13382400_3508100","13382400_3508700","13381600_3508100","13381800_3509000","13381600_3508700","13381000_3509000"],i=1;i<=10;i++)a.push({col1:e[i-1],col2:i,if_draw:!0});t.updata(a);var r="13382000_3508700".split("_",2),n=(new BMap.MercatorProjection,map.getMapType().getProjection().pointToLngLat({x:r[0],y:r[1]})),o=new BMap.Point(n.lng,n.lat);map.setCenter(o)}},mounted:function(){this._getMapData(),this.drawHeatMap(),this.initEcharts()}}),d=l,h=(e("b37d"),e("4023")),f=Object(h["a"])(d,i,r,!1,null,"a8a700d4",null);a["default"]=f.exports},"6f84":function(t,a,e){var i=e("e46b");i(i.P,"Array",{fill:e("b88d")}),e("0e8b")("fill")},"777a":function(t,a,e){var i=e("e46b"),r=e("f6b4"),n=e("238a"),s=e("9769"),o="["+s+"]",c="​",l=RegExp("^"+o+o+"*"),d=RegExp(o+o+"*$"),h=function(t,a,e){var r={},o=n((function(){return!!s[t]()||c[t]()!=c})),l=r[t]=o?a(f):s[t];e&&(r[e]=l),i(i.P+i.F*o,"String",r)},f=h.trim=function(t,a){return t=String(r(t)),1&a&&(t=t.replace(l,"")),2&a&&(t=t.replace(d,"")),t};t.exports=h},9769:function(t,a){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},b37d:function(t,a,e){"use strict";var i=e("38eb"),r=e.n(i);r.a},b88d:function(t,a,e){"use strict";var i=e("008a"),r=e("f58a"),n=e("eafa");t.exports=function(t){var a=i(this),e=n(a.length),s=arguments.length,o=r(s>1?arguments[1]:void 0,e),c=s>2?arguments[2]:void 0,l=void 0===c?e:r(c,e);while(l>o)a[o++]=t;return a}}}]);